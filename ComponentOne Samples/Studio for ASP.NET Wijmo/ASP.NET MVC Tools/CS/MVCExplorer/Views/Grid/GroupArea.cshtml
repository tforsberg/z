@{
    ViewBag.Title = "Group area";
    Layout = "~/Views/Shared/_WidgetLayout.cshtml";
}


@section header{
    <script id="scriptInit" type="text/javascript">
        $(document).ready(function () {
            $("#demo").wijgrid({
                allowColMoving: true,
                allowSorting: true,
                showGroupArea: true,
                columns: [
                    {
                        sortDirection: "ascending",
                        aggregate: "count",
                        groupInfo: {
                            position: "header",
                            outlineMode: "startCollapsed",
                            headerText: "{1}:{0}, Count={2}"
                        }
                    },
                    {},
                    { dataType: "currency", aggregate: "sum" },
                    { dataType: "number", dataFormatString: "n0", aggregate: "sum" }
                ]
            });

            var demo2 = $("#demo2").wijgrid({
                allowColMoving: true,
                allowSorting: true,
                showGroupArea: true,
                columnGrouping: function (e, args) {
                    if (args.dragSource !== "groupArea") {
                        $.each(demo2.wijgrid("columns"), function (i, w) {
                            if (w.options.dataKey == args.drag.dataKey) {
                                w.options.visible = false;
                            }
                        });
                    }
                },
                columnUngrouping: function (e, args) {
                    args.column.visible = true;
                },
                columns: [
                    {
                        sortDirection: "ascending",
                        aggregate: "count",
                        visible: false,
                        groupInfo: {
                            position: "header",
                            outlineMode: "startCollapsed",
                            headerText: "{1}:{0}, Count={2}"
                        }
                    },
                    {},
                    { dataType: "currency", aggregate: "sum" },
                    { dataType: "number", dataFormatString: "n0", aggregate: "sum" }
                ]
            });
        });
    </script>
}

<h2>Grouping and aggregates</h2>

<div class="main demo">
    <!-- Begin demo markup -->
    <table id="demo">
        <thead>
            <tr>
                <th>OrderID</th><th>ProductID</th><th>UnitPrice</th><th>Quantity</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>10248</td><td>11</td><td>14</td><td>12</td>
            </tr><tr>
                <td>10248</td><td>42</td><td>9.8</td><td>10</td>
            </tr><tr>
                <td>10248</td><td>72</td><td>34.8</td><td>5</td>
            </tr><tr>
                <td>10249</td><td>14</td><td>18.6</td><td>9</td>
            </tr><tr>
                <td>10249</td><td>51</td><td>42.4</td><td>40</td>
            </tr><tr>
                <td>10250</td><td>41</td><td>7.7</td><td>10</td>
            </tr><tr>
                <td>10250</td><td>51</td><td>42.4</td><td>35</td>
            </tr><tr>
                <td>10250</td><td>65</td><td>16.8</td><td>15</td>
            </tr><tr>
                <td>10251</td><td>22</td><td>16.8</td><td>6</td>
            </tr><tr>
                <td>10251</td><td>57</td><td>15.6</td><td>15</td>
            </tr><tr>
                <td>10251</td><td>65</td><td>16.8</td><td>20</td>
            </tr><tr>
                <td>10252</td><td>20</td><td>64.8</td><td>40</td>
            </tr><tr>
                <td>10252</td><td>33</td><td>2</td><td>25</td>
            </tr><tr>
                <td>10252</td><td>60</td><td>27.2</td><td>40</td>
            </tr><tr>
                <td>10253</td><td>31</td><td>10</td><td>20</td>
            </tr><tr>
                <td>10253</td><td>39</td><td>14.4</td><td>42</td>
            </tr><tr>
                <td>10253</td><td>49</td><td>16</td><td>40</td>
            </tr>
        </tbody>
    </table>

    <p>hide the column when grouped:</p>
    <table id="demo2">
        <thead>
            <tr>
                <th>OrderID</th><th>ProductID</th><th>UnitPrice</th><th>Quantity</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>10248</td><td>11</td><td>14</td><td>12</td>
            </tr><tr>
                <td>10248</td><td>42</td><td>9.8</td><td>10</td>
            </tr><tr>
                <td>10248</td><td>72</td><td>34.8</td><td>5</td>
            </tr><tr>
                <td>10249</td><td>14</td><td>18.6</td><td>9</td>
            </tr><tr>
                <td>10249</td><td>51</td><td>42.4</td><td>40</td>
            </tr><tr>
                <td>10250</td><td>41</td><td>7.7</td><td>10</td>
            </tr><tr>
                <td>10250</td><td>51</td><td>42.4</td><td>35</td>
            </tr><tr>
                <td>10250</td><td>65</td><td>16.8</td><td>15</td>
            </tr><tr>
                <td>10251</td><td>22</td><td>16.8</td><td>6</td>
            </tr><tr>
                <td>10251</td><td>57</td><td>15.6</td><td>15</td>
            </tr><tr>
                <td>10251</td><td>65</td><td>16.8</td><td>20</td>
            </tr><tr>
                <td>10252</td><td>20</td><td>64.8</td><td>40</td>
            </tr><tr>
                <td>10252</td><td>33</td><td>2</td><td>25</td>
            </tr><tr>
                <td>10252</td><td>60</td><td>27.2</td><td>40</td>
            </tr><tr>
                <td>10253</td><td>31</td><td>10</td><td>20</td>
            </tr><tr>
                <td>10253</td><td>39</td><td>14.4</td><td>42</td>
            </tr><tr>
                <td>10253</td><td>49</td><td>16</td><td>40</td>
            </tr>
        </tbody>
    </table>
    <!-- End demo markup -->
    <div class="demo-options">
        <!-- Begin options markup -->
        <!-- End options markup -->
    </div>
</div>

@section description{
    <p>
        This sample shows how to use the <b>showGroupArea</b> option to create grouping within wijgrid.
    </p>

    <ul>
        <li>
        The <b>showGroupArea</b> option determines whether the group area should be displayed or not.
        </li>
    </ul>

    <p>
        In order to allow dragging columns into group area, <b>allowColMoving</b> option must be set to true.
    </p>
}

