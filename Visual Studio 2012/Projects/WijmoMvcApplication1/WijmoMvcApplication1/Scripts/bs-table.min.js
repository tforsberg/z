"use strict";angular.module("bsTable",[]).directive("bsTable",function(){return{restrict:"A",scope:!0,compile:function(e){var t=0,a=e.find("tbody:first"),i=a.find("tr:first"),n=void 0!==i.attr("ng-repeat")?i.attr("ng-repeat"):a.attr("ng-repeat"),l=" | bsTableSkip:bsTablePagination.skipAt | limitTo:bsTablePagination.pageSize";void 0!==i.attr("ng-repeat")?i.attr("ng-repeat",n+l):a.attr("ng-repeat",n+l),t=i.children("td").size();var o='<tfoot><tr><td colspan="'+t+'"><ul class="pagination"></ul><select ng-model="bsTablePagination.pageSize" class="form-control select-page-size"><option value="5" selected="selected">5</option><option value="10">10</option><option value="20">20</option><option value="40">40</option></select></td></tr></tfoot>';return e.append(o),{pre:function(e,t){var a=e.bsTablePagination={},i=t.children("tfoot").children("tr").children("td"),l=n.match(/^\s*(.+)\s+in\s+(.*)\s*$/)[2],o=e.$eval(l),s=o.length;e.$watchCollection(l,function(){s=e.$eval(l).length,a.lastPage=Math.ceil(s/a.pageSize),r()}),e.$watch("bsTablePagination.pageSize",function(){r()}),a.pageSize=5,a.lastPage=Math.ceil(s/a.pageSize),a.page=1,a.skipAt=(a.page-1)*a.pageSize,i.children(".select-page-size").change(function(){var t=parseInt($(this).val());a.lastPage=Math.ceil(s/t),a.page=1,a.skipAt=(a.page-1)*t,e.$digest()});var r=function(){for(var i="",n=0;n<Math.ceil(s/e.bsTablePagination.pageSize);n++)i+="<li "+(a.page==n+1?'class="active"':"")+'><a ng-href="#">'+(n+1)+"</a></li>";t.find(".pagination").html(i),t.find(".pagination").find("li").bind("click",p)},p=function(){var t=parseInt($(this).find("a").text());$(this).parent().find("li").removeClass("active"),$(this).addClass("active"),a.page=t,a.skipAt=(a.page-1)*a.pageSize,e.$digest()}}}}}}).filter("bsTableSkip",function(){return function(e,t){return e.slice(t)}});